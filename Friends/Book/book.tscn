[gd_scene load_steps=9 format=3 uid="uid://bbdxqcshmqbv1"]

[ext_resource type="Script" path="res://Friends/FriendOBJ.gd" id="1_m1872"]
[ext_resource type="Resource" uid="uid://chyeoi2wxi532" path="res://Friends/Resources/Book.tres" id="2_os2db"]
[ext_resource type="ArrayMesh" uid="uid://b2wu7loit6xud" path="res://Friends/Book/bookMesh.tres" id="3_p5tqc"]
[ext_resource type="Texture2D" uid="uid://dnlkdn2iq35bu" path="res://VFX/BlurCircleMask.png" id="4_gnfd7"]
[ext_resource type="Script" path="res://UI/map_marker.gd" id="5_w67vm"]
[ext_resource type="AudioStream" uid="uid://ca3701qcvfxco" path="res://Sounds/SFX/sandwalking.wav" id="6_4h1tw"]
[ext_resource type="PackedScene" uid="uid://dmfh2vea4gno6" path="res://Friends/questions.tscn" id="6_o0gug"]

[sub_resource type="BoxShape3D" id="BoxShape3D_v1d8x"]
size = Vector3(0.5, 0.268005, 0.5)

[node name="Book" type="StaticBody3D" groups=["Interactable"]]
collision_layer = 2
collision_mask = 0
script = ExtResource("1_m1872")
friend = ExtResource("2_os2db")

[node name="Mesh" type="MeshInstance3D" parent="."]
transform = Transform3D(0.91706, 0.398749, 0, -0.383493, 0.881975, 0.273959, 0.109241, -0.251237, 0.961741, 0, 0.8, 0)
cast_shadow = 0
mesh = ExtResource("3_p5tqc")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(0.91706, 0.398749, 0, -0.383493, 0.881975, 0.273959, 0.109241, -0.251237, 0.961741, 0.0251774, 0.784938, -0.0158633)
shape = SubResource("BoxShape3D_v1d8x")

[node name="MapMarker" type="Sprite3D" parent="."]
visible = false
layers = 4
cast_shadow = 0
modulate = Color(0, 0.0499997, 1, 1)
pixel_size = 0.001
billboard = 1
double_sided = false
no_depth_test = true
fixed_size = true
texture = ExtResource("4_gnfd7")
script = ExtResource("5_w67vm")

[node name="MusicPlayer" type="AudioStreamPlayer3D" parent="."]
max_distance = 20.0
panning_strength = 5.0
bus = &"Music"

[node name="SandSound" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("6_4h1tw")
bus = &"SFX"

[node name="Questions" parent="." instance=ExtResource("6_o0gug")]

[node name="SpeakingLabel" type="Label" parent="."]
visible = false
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -127.0
offset_top = 72.0
offset_right = 127.0
offset_bottom = 95.0
grow_horizontal = 2
text = "Someone is speaking..."
horizontal_alignment = 1

[node name="MarginContainer" type="MarginContainer" parent="SpeakingLabel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = -20
theme_override_constants/margin_top = -5
theme_override_constants/margin_right = -20
theme_override_constants/margin_bottom = -5

[node name="Panel" type="Panel" parent="SpeakingLabel/MarginContainer"]
z_index = -1
layout_mode = 2

[node name="Timers" type="Node" parent="SpeakingLabel"]

[node name="SpeakingTimer" type="Timer" parent="SpeakingLabel/Timers"]
wait_time = 5.0
one_shot = true
